<!DOCTYPE html>
<html>
<head>
    <title>Mapbox Token Test</title>
</head>
<body>
    <h1>Mapbox Token Validation Test</h1>
    <div id="results"></div>
    
    <script>
    async function testMapboxToken(token, description) {
        console.log(`Testing ${description}:`, token);
        const results = document.getElementById('results');
        
        try {
            // Test 1: Basic API call
            const response = await fetch(`https://api.mapbox.com/styles/v1/mapbox/streets-v12?access_token=${token}`);
            
            const result = document.createElement('div');
            result.style.padding = '10px';
            result.style.margin = '10px 0';
            result.style.border = '1px solid #ccc';
            
            if (response.ok) {
                result.style.backgroundColor = '#d4edda';
                result.innerHTML = `
                    <h3>✅ ${description} - SUCCESS</h3>
                    <p>Status: ${response.status}</p>
                    <p>Token: ${token.substring(0, 20)}...</p>
                `;
                console.log(`✅ ${description} works!`);
            } else {
                result.style.backgroundColor = '#f8d7da';
                result.innerHTML = `
                    <h3>❌ ${description} - FAILED</h3>
                    <p>Status: ${response.status}</p>
                    <p>Token: ${token.substring(0, 20)}...</p>
                    <p>Error: ${await response.text()}</p>
                `;
                console.log(`❌ ${description} failed:`, response.status);
            }
            
            results.appendChild(result);
            
        } catch (error) {
            const result = document.createElement('div');
            result.style.padding = '10px';
            result.style.margin = '10px 0';
            result.style.border = '1px solid #ccc';
            result.style.backgroundColor = '#f8d7da';
            result.innerHTML = `
                <h3>❌ ${description} - ERROR</h3>
                <p>Token: ${token.substring(0, 20)}...</p>
                <p>Error: ${error.message}</p>
            `;
            results.appendChild(result);
            console.error(`❌ ${description} error:`, error);
        }
    }
    
    // Test tokens
    const tokens = [
        {
            token: 'pk.eyJ1IjoienByYXRoYW14IiwiYTr6ImNtZnIyd2xoYzA0Ymwya3NkejFqemhkMW0ifQ.Da77w6Dyml0JEuHHc_RQsA',
            description: 'Full Token (local .env)'
        },
        {
            token: 'pk.eyJ1IjoienByYXRoYW14IiwiYTr6ImNtZnIyd2xoYzA0Ymwya3NkejFqemhkMW0ifQ.Da77w6Dyml0JEuHHc_RQs',
            description: 'Truncated Token (Vercel)'
        }
    ];
    
    // Test all tokens
    tokens.forEach(({token, description}) => {
        testMapboxToken(token, description);
    });
    </script>
</body>
</html>